# Clonar repo do GitHub para repo do Azure
#
# Michel Metran
# Data: 05.10.2024
# Atualizado em: 05.10.2024

name: Clone to Azure DevOps

on:
  push:
    branches:
      - main

jobs:
  clone:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install Git
        run: sudo apt-get install git
      
      - name: Setup Git
        run:  git config --global user.email "you@example.com" && git config --global user.name "Your Name"

      - name: Clone repository Azure DevOps
        run: |
          git clone $AZURE_DEVOPS_URL
        env:
          AZURE_DEVOPS_URL: ${{ secrets.AZURE_DEVOPS_URL }}
  
      - name: Get Inside Folder
        run: |
          cd teste_action_clone

      - name: Add remote
        run: |
          git remote add azure git@github.com:michelmetran/github_actions_personal.git
          git remote update
          git merge azure/main
          git push origin main
        # env:
        #   AZURE_DEVOPS_URL: ${{ secrets.AZURE_DEVOPS_URL }}
          #AZURE_DEVOPS_PAT: ${{ secrets.AZURE_DEVOPS_PAT }}
